# Аргументи командне линије

Од раније је познато да је најважнија функција у програмском језику C фунцкија `main()`. Она се може дефинисати једноставно - без навођења типа, аргумената+ и вредности коју враћа `main(){}`. Функција `main()` је функција целобројног типа, јер враћа целобројну вредност процесу оперативног система у којем је програм покренут - `0` ако је програм успешно извршен, односно цео број различит од нуле ако је било проблема током извршавања програма. Ако се функцији `main()` не прослеђују аргументи, онда се у загради може навести кључна реч `void`.  

```c
int main(void)
{
	return 0;
}
```

Аргументи се могу проследити функцији `main()` путем процеса оперативног система у којем је програм покренут, што је обично командна линија. Због тога се аргументи функције `main()` називају **аргументи командне линије**. У програмском језику C аргументи командне линије су предефинисани и називају се `argc` и `argv`.

```c
int main(int argc, char *argv[])
{
    return 0;
}
```

Аргумент `argc` *(енгл. ***ARG***ument ***C***ount)* је целобројна променљива која чува број аргумената, укључујући и име извршног фајла као први аргумент. Аргумент `argv[]` *(енгл. ***ARG***ument ***V***ector)* је низ показивача на стрингове у којима се чувају аргументи, где је елемент `argv[0]` име извршног фајла, након чека следе елементи који чувају аргументе задате у командној линији.

Нека је, на пример, у фајлу `argumenti.c` унет следећи програм:

```c
#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>

int main(int argc, char* argv[])
{
    printf("Broj unetih argumenata: %d\n", argc);
    for (int i = 0; i < argc; i++)
        printf("Argument %d: %s\n", i, argv[i]);
    return 0;
}
```

Покретањем извршног фајла у директоријуму где се извршни фајл и налази, наводећи само име извршног фајла `argumenti.exe` (без аргумената), на излазу добијамо:

```
Broj unetih argumenata: 1
Argument 0: argumenti.exe
```

Покретањем извршног фајла из другог директоријума, наводећи путању до извршног фајла и име извршног фајла, `C:\Program\x64\Debug\argumenti.exe` (без аргумената), на излазу добијамо:

```
Broj unetih argumenata: 1
Argument 0: C:\Program\x64\Debug\argumenti.exe
```

Покретањем извршног фајла са аргументима `argumenti.exe Hello, World!`, на излазу добијамо:

```
Broj unetih argumenata: 3
Argument 0: argumenti.exe
Argument 1: Hello,
Argument 2: World!
```

`Hello, World!` моћемо проследити као један аргумент ако користимо наводнике `argumenti.exe "Hello, World!"`. У овом случају, на излазу добијамо:

```
Broj unetih argumenata: 2
Argument 0: argumenti.exe
Argument 1: Hello, World!
```

> **Задатак 1.** Напишите програм `ime.c` који као аргументе командне линије добија име и презиме корисника, па на излазу исписује: `Ti se zoves: ime. Ti se prezivas: prezime.`. Ако је корисник задао мање од два аргумента у командној линији (ниједан или један), на излазу исписати поруку о грешци: `Noras uneti ime i prezime!`. Ако је корисник задао више од два аргумента у командној линији, на излазу исписати поруку о грешци: `Unesi samo ime i prezime!`

Ако је корисник задао тачно два аргумента у командној линији, онда ће `argc` добити вредност `3`, где је `argv[0]` стринг у којем је записано име извршног фајла, `argv[1]` стринг у којем је записано име корисника и `argv[2]` стринг у којем је записано презиме корисника. Ако је задао мање од два аргумента, онда ће `argc` добити вредност мању од `3`, односно ако је задао више од два аргумента, `argc` ће добити вредност већу од `3`.  

```c
#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>

int main(int argc, char* argv[])
{
    if (argc < 3)
        printf("Moras uneti ime i prezime!");
    else if (argc == 3)
        printf("Ti se zoves: %s. Ti se prezivas: %s.", argv[1], argv[2]);
    else
        printf("Unesi samo ime i prezime!");
    return 0;
}
```

Ако је задат недовољан број аргумената:

```
C:\Program\x64\Debug\>ime.exe Velimir
Moras uneti ime i prezime!
```

Ако је задат коректан број аргумената:

```
C:\Program\x64\Debug\>ime.exe Velimir Radlovacki
Ti se zoves: Velimir. Ti se prezivas: Radlovacki.
```

Ако је задат превелик број аргумената:

```
C:\Program\x64\Debug\>ime.exe Velimir Radlovacki Bata
Unesi samo ime i prezime!
```

> **Задатак 2.** Напишите програм `zbir.c` који као аргументе командне линије добија два цела броја, а на излазу исписује њихов збир. Ако је корисник задао мање или више од два аргумента у командној линији, на излазу исписати поруку о грешци: `Unesi dva cela broja!`.

Ако желимо да аргументе команде линије користимо као целе или реалне бројеве, онда су нам потребне функције за претварање стрингова у целе, односно у реалан број. У овом случају можемо користити библиотечку функцију `atoi()` из `stdlib.h` која претвара стринг у цео број.

```c
#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char* argv[])
{
    if (argc == 3)
        printf("%d", atoi(argv[1]) + atoi(argv[2]));
    else
        printf("Unesi dva cela broja!");
    return 0;
}
```

### Додатно

Већина C/C++ компајлера подржава и трећи аргумент `envp[]` *(енгл. ***ENV***ironment ***P***ointer)*. Овај аргумент је такође низ показивача на стрингове и чува параметре окружења, односно, оперативног система. Извршавање следећег програма исписаће параметре оперативног система.

```c
#include <stdio.h>

int main(int argc, char* argv[], char* envp[])
{
    for (int i = 0; envp[i] != NULL; i++)
        printf("%s\n", envp[i]);
    return 0;
}
```




Аргумент `envp[]` није дефинисан POSIX.1 стандардном и нећемо га користити - параментре окружења можемо добити користећи функцију `getenv` дефинисану у `stdlib.h`.
